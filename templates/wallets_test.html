<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Management</title>
  <!-- Include Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">

</head>
<body>
  <div class="container">
    <h2 class="mt-5">Expense Management</h2>
    <div class="row mt-4">
      <div class="col-3">
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">Filter Options</h5>
            <div class="form-group">
              <label for="filterType">Filter by Type:</label>
              <select id="filterType" class="form-control">
                <option value="">All</option>
                <option value="Groceries">Groceries</option>
                <option value="Utilities">Utilities</option>
                <option value="Entertainment">Entertainment</option>
              </select>
            </div>
            <div class="form-group">
              <label for="filterUser">Filter by User:</label>
              <select id="filterUser" class="form-control">
                <option value="">All</option>
                <option value="User 1">User 1</option>
                <option value="User 2">User 2</option>
                <option value="User 3">User 3</option>
              </select>
            </div>
            <div class="form-group">
              <label for="filterDate">Filter by Date:</label>
              <input type="date" id="filterDate" class="form-control">
            </div>
            <div class="d-flex justify-content-between">
              <div>
                <button id="applyFilterBtn" class="btn btn-primary">Apply Filter</button>
              </div>
              <div class="ml-2">
                <button id="clearFiltersBtn" class="btn btn-secondary">Clear Filters</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-9">
        <div class="table-responsive">
          <table class="table table-bordered table-striped" id="expensesTableContainer">
            <thead>
              <tr>
                <th data-sort-by="name">Name</th>
                <th data-sort-by="amount">Amount</th>
                <th data-sort-by="type">Type</th>
                <th data-sort-by="date">Date</th>
              </tr>
            </thead>
            <tbody id="expensesTableBody">
              <!-- Rows will be dynamically generated here -->
            </tbody>
          </table>
          </div>
        </div>
      </div>
    </div>
  <!-- Include Bootstrap JS and jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<script>
  $(document).ready(function() {
    $('#expensesTableContainer').DataTable();
  });
</script>

  <script>
    const mockData = [
      { name: 'Expense 1', amount: 100, type: 'Groceries', user: 'User 1', date: '2023-08-01' },
      { name: 'Expense 2', amount: 10, type: 'Utilities', user: 'User 2', date: '2023-08-02' },
      { name: 'Expense 3', amount: 20, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 4', amount: 50, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 5', amount: 55, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 6', amount: 22, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 7', amount: 35, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 8', amount: 39, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 9', amount: 84, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 10', amount: 75, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 11', amount: 96, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 12', amount: 81, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 13', amount: 88, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 14', amount: 52, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 15', amount: 15, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 16', amount: 36, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      { name: 'Expense 17', amount: 55, type: 'Entertainment', user: 'User 1', date: '2023-08-03' },
      // ... more mock data ...
    ];

    const expensesTableBody = document.getElementById('expensesTableBody');
    let sortBy = null; // Current column to sort by

    function populateTable(filteredData) {
      expensesTableBody.innerHTML = '';

      filteredData.forEach(expense => {
        const row = expensesTableBody.insertRow();
        row.innerHTML = `
          <td>${expense.name}</td>
          <td>${expense.amount}</td>
          <td>${expense.type}</td>
          <td>${expense.date}</td>
        `;
      });
    }

    const clickCounts = {};

    function applyFilter() {
      const filterType = document.getElementById('filterType').value;
      const filterUser = document.getElementById('filterUser').value;
      const filterDate = document.getElementById('filterDate').value;

      let filteredData = mockData;

      if (filterType) {
        filteredData = filteredData.filter(expense => expense.type === filterType);
      }

      if (filterUser) {
        filteredData = filteredData.filter(expense => expense.user === filterUser);
      }

      if (filterDate) {
        filteredData = filteredData.filter(expense => expense.date === filterDate);
      }

      // Sorting
    filteredData.sort((a, b) => {
      
      if (sortBy === 'date') {
        if (clickCounts[sortBy] === 0) {
          return new Date(b[sortBy]) - new Date(a[sortBy]);
        }
        return new Date(a[sortBy]) - new Date(b[sortBy]);
      }

      if (clickCounts[sortBy] === 0) {
        return b[sortBy] - a[sortBy];
      }
      return a[sortBy] - b[sortBy];
    });

      populateTable(filteredData);
    }

      document.addEventListener('DOMContentLoaded', () => {
      populateTable(mockData);

      const applyFilterBtn = document.getElementById('applyFilterBtn');
      applyFilterBtn.addEventListener('click', applyFilter);

      const clearFiltersBtn = document.getElementById('clearFiltersBtn');
      clearFiltersBtn.addEventListener('click', clearFilters);

      const tableHeaders = document.querySelectorAll('#expensesTable th[data-sort-by]');
    tableHeaders.forEach(header => {
      clickCounts[header.getAttribute('data-sort-by')] = 0; // Initialize click counts
      header.addEventListener('click', () => {
        sortBy = header.getAttribute('data-sort-by');
        clickCounts[sortBy] = (clickCounts[sortBy] + 1) % 3; // Cycle through 0, 1, 2
        applyFilter();
      });
    });
  });

    function clearFilters() {
      document.getElementById('filterType').value = '';
      document.getElementById('filterUser').value = '';
      document.getElementById('filterDate').value = '';
      populateTable(mockData);
    }
  </script>
</body>
</html>