{% extends 'base.html' %}

{% block content %}
<h1>Wallet Details</h1>

<!-- Wallet Details -->
<h2>{{ wallet.name }} - {{ wallet.status }}</h2>

<!-- Expenses List -->
<h3>Expenses</h3>
<ul>
  {% for expense in expenses %}
  <li>{{ expense.name }} - {{ expense.amount }}</li>
  {% endfor %}
</ul>

<!-- Users List -->
<h3>Users</h3>
<ul>
  {% for user in users %}
  <li>{{ user.name }} - {{ user.email }}</li>
  {% endfor %}
</ul>

<!-- Add User Button -->
<button onclick="showAddUserPopup()">Add User</button>

<!-- Delete User Button -->
<button onclick="showDeleteUserPopup()">Delete User</button>

<!-- Close Wallet Button -->
<button onclick="closeWallet()">Close Wallet</button>

<!-- Add User Popup -->
<div id="addUserPopup" style="display: none;">
  <h2>Add User</h2>
  <form action="/add_user" method="post">
    <label for="userName">User Name:</label>
    <input type="text" id="userName" name="userName" required><br><br>
    <label for="userEmail">User Email:</label>
    <input type="email" id="userEmail" name="userEmail" required><br><br>
    <input type="hidden" id="walletId" name="walletId" value="{{ wallet.wallet_id }}">
    <input type="submit" value="Add User">
  </form>
</div>

<!-- Delete User Popup -->
<div id="deleteUserPopup" style="display: none;">
  <h2>Delete User</h2>
  <form action="/delete_user" method="post">
    <label for="userId">Select User:</label>
    <select id="userId" name="userId">
      {% for user in users %}
      <option value="{{ user.user_id }}">{{ user.name }}</option>
      {% endfor %}
    </select><br><br>
    <input type="hidden" id="walletId" name="walletId" value="{{ wallet.wallet_id }}">
    <input type="submit" value="Delete User">
  </form>
</div>

<!-- Close Wallet Popup -->
<div id="closeWalletPopup" style="display: none;">
  <h2>Close Wallet</h2>
  <form action="/close_wallet" method="post">
    <input type="hidden" id="walletId" name="walletId" value="{{ wallet.wallet_id }}">
    <input type="submit" value="Close Wallet">
  </form>
</div>

<script>
function showAddUserPopup() {
  var popup = document.getElementById("addUserPopup");
  popup.style.display = "block";
}

function showDeleteUserPopup() {
  var popup = document.getElementById("deleteUserPopup");
  popup.style.display = "block";
}

function closeWallet() {
  var popup = document.getElementById("closeWalletPopup");
  popup.style.display = "block";
}
</script>

{% endblock %}
